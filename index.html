<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gaudiya Songs â€“ Search</title>
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#0f172a" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/recommendations.css" />
  </head>
  <body class="has-bottom-nav">
    <header class="app-header">
      <div class="brand">
        <img src="/favicon.svg" alt="Lotus" class="logo" />
        <h1>Gaudiya Songs</h1>
      </div>
      <input
        id="search"
        type="search"
        placeholder="Search songsâ€¦ (diacritics optional)"
        aria-label="Search songs"
        autocomplete="off"
      />
    </header>

    <main id="results" class="results" aria-live="polite"></main>

    <template id="result-item">
      <article class="result" role="button" tabindex="0">
        <h2 class="title"></h2>
        <div class="meta"></div>
        <p class="snippet"></p>
      </article>
    </template>

    <section id="recommendations"></section>

    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vitae
      cupiditate, assumenda in fugiat neque blanditiis itaque! Voluptatum fugit
      excepturi illum ad adipisci id sint maxime ratione harum, sapiente quaerat
      error.
    </p>
    <nav class="bottom-nav" aria-label="Primary">
      <button id="navHome" aria-label="Home">ğŸ </button>
      <button id="navGlobalSearch" aria-label="Search">ğŸ”</button>
      <button id="navCategories" aria-label="Categories">ğŸ“š</button>
      <button id="navSettings" aria-label="Settings">âš™ï¸</button>
    </nav>

    <script src="./js/theme.js" defer></script>
    <script src="./js/utils.js" defer></script>
    <script src="./js/app.js" type="module"></script>
    <script type="module">
      import { loadSongs } from "./Data/data.js";
      import {
        loadOccasions,
        getRecommendedSongsStructured,
        displayRecommendedSongs,
      } from "./Data/recommendations.js";

      async function init() {
        await loadSongs();
        await loadOccasions();

        // Get structured recommendations
        const recSongsByType = getRecommendedSongsStructured(10);

        // Display in UI
        displayRecommendedSongs(recSongsByType);
      }

      init();
    </script>
  </body>
</html>
